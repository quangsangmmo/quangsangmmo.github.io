api_key = "aW1wb3J0IHJlcXVlc3RzLCB0aW1lCmltcG9ydCBqc29uLCByYW5kb20sIHN0cmluZywgb3MKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWV6b25lCmZyb20gdGVybWNvbG9yIGltcG9ydCBjb2xvcmVkCmZyb20gZnVuY3Rpb24gaW1wb3J0ICoKdmVyc2lvbiA9ICIxLjAuMCIKbmFtZV90b29sID0gIm1hdGNocXVlc3QiCkJBTk5FUihuYW1lX3Rvb2wsIHZlcnNpb24pCnByaW50KGYiIiIKe8SR4buPfeKfqXt2w6BuZ33in6l7bOG7pWN94p+pIHtsYW19Q8OBQyBDSOG7qEMgTsSCTkcgQ+G7pkEgVE9PTAp7xJHhu499W3t2w6BuZ30re8SR4buPfV0ge3Ry4bqvbmd9QXV0byBjbGljawp7xJHhu499W3t2w6BuZ30re8SR4buPfV0ge3Ry4bqvbmd9QXV0byBzdGFydCBmYXJtCnvEkeG7j31be3bDoG5nfSt7xJHhu499XSB7dHLhuq9uZ31BdXRvIGNsYWltIGZyYW0Ke8SR4buPfVt7dsOgbmd9K3vEkeG7j31dIHt0cuG6r25nfUhvw6BuIHRow6BuaCBjw6FjIG5oaeG7h20gduG7pSAobmdvw6BpIFRlbGVncmFtKQoiIiIpCmRlZiBQUk9GSUxFKGhlYWRlcnMsIGRhdGEsIHByb3hpZXM9Tm9uZSk6CiAgZXJyb3JfY291bnQgPSAwCiAgbWF4X3JldHJpZXMgPSAxMAogIGhlYWRlcnNbImNvbnRlbnQtbGVuZ3RoIl0gPSBzdHIobGVuKHN0cihkYXRhKS5yZXBsYWNlKCIgIiwiIikpKQogIHdoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgIGlmIHByb3hpZXM6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL3RnYXBwLWFwaS5tYXRjaGFpbi5pby9hcGkvdGdhcHAvdjEvdXNlci9wcm9maWxlIiwgaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEsIHByb3hpZXM9cHJveGllcywgdGltZW91dD0zMCkKICAgICAgZWxzZToKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vdGdhcHAtYXBpLm1hdGNoYWluLmlvL2FwaS90Z2FwcC92MS91c2VyL3Byb2ZpbGUiLGhlYWRlcnM9aGVhZGVycywganNvbj1kYXRhLCB0aW1lb3V0PTMwKQogICAgICAjcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgIGdldGRhdGEgPSByZXNwb25zZS5qc29uKClbImRhdGEiXQogICAgICBmYXJtUmV3YXJkID0gZ2V0ZGF0YVsiZmFybVJld2FyZCJdCiAgICAgIGlmIGZhcm1SZXdhcmQgPT0gIjAuMDAiOgogICAgICAgIGZhcm1SZXdhcmQgPSBzdGFydEZhcm0oaGVhZGVycywgZGF0YSwgcHJveGllcykKICAgICAgICBpZiBwcm94aWVzOgogICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL01BVENIUVVFU1RwLk1BVENIUVVFU1QuaW8vYXBpL2dldFVzZXJJbmZvIiwgaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEsIHByb3hpZXM9cHJveGllcywgdGltZW91dD0zMCkKICAgICAgICBlbHNlOgogICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL01BVENIUVVFU1RwLk1BVENIUVVFU1QuaW8vYXBpL2dldFVzZXJJbmZvIixoZWFkZXJzPWhlYWRlcnMsIGpzb249ZGF0YSwgdGltZW91dD0zMCkKICAgICAgICAjcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgICAgZ2V0ZGF0YSA9IHJlc3BvbnNlLmpzb24oKVsiZGF0YSJdCiAgICAgIGlwID0gZ2V0ZGF0YVsiaXAiXQogICAgICB0YXNrcyA9IGdldGRhdGFbInRhc2tzIl0KICAgICAgYmFsYW5jZSA9IGdldGRhdGFbImJhbGFuY2UiXQogICAgICBpZiAidXNlcm5hbWUiIGluIGdldGRhdGE6CiAgICAgICAgdXNlcm5hbWUgPSBnZXRkYXRhWyJ1c2VybmFtZSJdCiAgICAgIGVsc2U6CiAgICAgICAgdXNlcm5hbWUgPSBnZXRkYXRhWyJmaXJzdF9uYW1lIl0KICAgICAgZW1haWwgPSBnZXRkYXRhWyJlbWFpbCJdCiAgICAgIGF2YWlsYWJsZVRhcHMgPSBnZXRkYXRhWyJhdmFpbGFibGVUYXBzIl0KICAgICAgZmFybVN0YXJ0ZWRBdCA9IGdldGRhdGFbImZhcm1TdGFydGVkQXQiXQogICAgICBtYXhDaGlsZHJlbkNvdW50ID0gZ2V0ZGF0YVsibWF4Q2hpbGRyZW5Db3VudCJdCiAgICAgIHNlcnZlclRpbWUgPSBnZXRkYXRhWyJzZXJ2ZXJUaW1lIl0KICAgICAgbWluaW5nRXJhSW50ZXJ2YWxJblNlY29uZHMgPSBnZXRkYXRhWyJtaW5pbmdFcmFJbnRlcnZhbEluU2Vjb25kcyJdCiAgICAgIGJyZWFrCiAgICBleGNlcHQ6CiAgICAgIGVycm9yX2NvdW50ID0gaGFuZGxlRXJyb3JzKGVycm9yX2NvdW50LCBtYXhfcmV0cmllcykKICAgIGlmIGVycm9yX2NvdW50ID49IG1heF9yZXRyaWVzOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIGfhurdwIGzhu5dpIHF1w6EgMTAgbOG6p24sIGto4bufaSBjaOG6oXkgbOG6oWkgdG9vbCBNQVRDSFFVRVNUIikKICAgICAgUlVOX01BVENIUVVFU1QoKQogICAgICBicmVhawogICAgQ09VTlRET1dOKDEwKQogIHJldHVybiBpcCwgdGFza3MsIGJhbGFuY2UsIHVzZXJuYW1lLCBlbWFpbCwgYXZhaWxhYmxlVGFwcywgZmFybVN0YXJ0ZWRBdCwgbWF4Q2hpbGRyZW5Db3VudCwgc2VydmVyVGltZSwgbWluaW5nRXJhSW50ZXJ2YWxJblNlY29uZHMKCmRlZiBSVU5fTUFUQ0hRVUVTVCgpOgogIHdpdGggb3BlbignY29uZmlnL01BVENIUVVFU1QuanNvbicsICdyJywgZW5jb2Rpbmc9J3V0Zi04JykgYXMgZmlsZToKICAgIGNvbmZpZ19kYXRhID0ganNvbi5sb2FkcyhyZW1vdmVfY29tbWVudHMoZmlsZS5yZWFkKCkpKQogIHVzZXJzID0gY29uZmlnX2RhdGEKICBpZiBsZW4odXNlcnMpID4gMTA6CiAgICBwcmludCgiQuG6oW4gY2jhu4kgxJHGsOG7o2MgcGjDqXAgdGjDqm0gdOG7kWkgxJFhIDEwIHTDoGkga2hv4bqjbiDEkeG7gyBjaOG6oXkgdG9vbCIpCiAgICBleGl0KCkKICBmb3IgdXNlciBpbiB1c2VyczoKICAgIGFjY291bnQgPSB1c2VyWyJTVFRfQUNDT1VOVCJdCiAgICBkYXRhID0gdXNlclsiREFUQSJdCiAgICBpZiBkYXRhID09ICIiIG9yIGRhdGEgPT0gInRoYXlfdGjhur9fYuG6sW5nX2RhdGEiOgogICAgICBwcmludChmInvEkeG7j33in6l7dsOgbmd94p+pe2zhu6VjfeKfqSB7xJHhu499VMOgaSBraG/huqNuIHt2w6BuZ317YWNjb3VudC5zcGxpdCgnXycpWzFdfSB7xJHhu499REFUQSDEkWFuZyBi4buLIHRy4buRbmciKQogICAgICBjb250aW51ZQogICAgd2l0aCBvcGVuKCdjb25maWcvc2V0dGluZy5qc29uJywgJ3InLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmaWxlOgogICAgICBjb25maWdfYWNjID0ganNvbi5sb2FkcyhyZW1vdmVfY29tbWVudHMoZmlsZS5yZWFkKCkpKVthY2NvdW50XQogICAgcHJveHlfbGlzdCA9IGNvbmZpZ19hY2NbInByb3h5Il0KICAgIHR5cGVfcHJveHkgPSBjb25maWdfYWNjWyJ0eXBlX3Byb3h5Il0KICAgIHVzZXJfYWdlbnQgPSBjb25maWdfYWNjWyJ1c2VyLWFnZW50Il0KICAgIGlmIHByb3h5X2xpc3QgIT0gIiI6CiAgICAgIHByb3h5X2xpc3QgPSBwcm94eV9saXN0LnNwbGl0KCI6IikKICAgICAgcHJveHkgPSBmInt0eXBlX3Byb3h5fTovL3twcm94eV9saXN0WzJdfTp7cHJveHlfbGlzdFszXX1Ae3Byb3h5X2xpc3RbMF19Ontwcm94eV9saXN0WzFdfSIKICAgICAgcHJveGllcyA9IHsKICAgICAgJ2h0dHAnOiBwcm94eSwKICAgICAgJ2h0dHBzJzogcHJveHksfQogICAgZWxzZToKICAgICAgaWYgYWNjb3VudC5zcGxpdCgnXycpWzFdICE9ICIxIjoKICAgICAgICBwcmludChmInvEkeG7j33in6l7dsOgbmd94p+pe2zhu6VjfeKfqSB7dHLhuq9uZ31DaHV54buDbiB0w6BpIGtob+G6o24gZG8ga2jDtG5nIGPDsyBwcm94eSIpCiAgICAgICAgY29udGludWUKICAgICAgcHJveGllcyA9ICIiCiAgICBpcCwgZmFrZWlwID0gZ2V0SVAocHJveGllcykKICAgIGlmIGlwID09IGZha2VpcCA9PSBOb25lOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqXt2w6BuZ33in6l7bOG7pWN94p+pIHvEkeG7j31cbsSQ4buUSSBUw4BJIEtIT+G6ok4gRE8gS0jDlE5HIEzhuqRZIMSQxq/hu6JDIElQLCBIw4NZIEtJ4buCTSBUUkEgTOG6oEkgUFJPWFlcbiIpCiAgICAgIGNvbnRpbnVlCiAgICBoZWFkZXJzID0gewogICAgICAnSG9zdCc6ICdNQVRDSFFVRVNUcC5NQVRDSFFVRVNULmlvJywKICAgICAgJ3NlYy1jaC11YSc6ICciQ2hyb21pdW0iO3Y9IjEyNCIsICJBbmRyb2lkIFdlYlZpZXciO3Y9IjEyNCIsICJOb3QtQS5CcmFuZCI7dj0iOTkiJywKICAgICAgJ2FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonLAogICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsCiAgICAgICd1c2VyLWFnZW50JzogdXNlcl9hZ2VudCwKICAgICAgJ3NlYy1jaC11YS1wbGF0Zm9ybSc6ICciQW5kcm9pZCInLAogICAgICAnb3JpZ2luJzogJ2h0dHBzOi8vTUFUQ0hRVUVTVHAuTUFUQ0hRVUVTVC5pbycsCiAgICAgICdyZWZlcmVyJzogJ2h0dHBzOi8vTUFUQ0hRVUVTVHAuTUFUQ0hRVUVTVC5pby8nfQogICAgaXBHYW1lLCB0YXNrcywgYmFsYW5jZSwgdXNlcm5hbWUsIGVtYWlsLCBhdmFpbGFibGVUYXBzLCBmYXJtU3RhcnRlZEF0LCBtYXhDaGlsZHJlbkNvdW50LCBzZXJ2ZXJUaW1lLCBtaW5pbmdFcmFJbnRlcnZhbEluU2Vjb25kcyA9IGdldFVzZXJJbmZvKGhlYWRlcnMsIGRhdGEsIHByb3hpZXMpCiAgICBwcmludChmIiIie8SR4bqtbX17xJFlbn08PDw8PDw8PDw8PDw8PDw8PDx7bGFtfVt7dsOgbmdCR317xJHhu499VEjDlE5HIFRJTiBUw4BJIEtIT+G6ok4gTUFUQ0hRVUVTVC5JT3vEkWVuQkd9e2xhbX1de8SRZW59Pj4+Pj4+Pj4+Pj4+Pj4+Pj5cbnvEkWVufeOAmPCfkaTjgJl7dHLhuq9uZ31Vc2VyTmFtZSB7xJHhu499OiB7bOG7pWN9e3VzZXJuYW1lfSB7dHLhuq9uZ30oe2jhu5NuZ317YWNjb3VudC5zcGxpdCgnXycpWzFdfXt0cuG6r25nfSlcbnvEkWVufeOAmPCfqpnjgJl7dHLhuq9uZ31T4buRIETGsCB7xJHhu499OiB7dsOgbmd9e2JhbGFuY2V9XG57xJFlbn3jgJjwn5OK44CZe3Ry4bqvbmd9VGjDtG5nIHPhu5EgR2FtZXvEkeG7j306IHt2w6BuZ317YXZhaWxhYmxlVGFwc317xJFlbn0ve3bDoG5nfXttYXhDaGlsZHJlbkNvdW50fVxue8SRZW5944CY8J+Tp+OAmXt0cuG6r25nfUVtYWlse8SR4buPfToge3hhbmh9e2VtYWlsfVxue8SRZW5944CY8J+Mj+OAmXt0cuG6r25nfUlQIHvEkeG7j306IHtuw6J1fXtpcH0ge2zhu6VjfcK7wrvCuyB7dHLhuq9uZ31GYWtlIElQIHvEkeG7j306IHtsYW19e2Zha2VpcH1cbiIiIikKICAgIHN0YXJ0X3RpbWUgPSBkYXRldGltZS5ub3coKQogICAgcHJpbnQoZiJ7xJHhu499XDAzM1sxOzMzOzQwbULhuq5UIMSQ4bqmVSBDSOG6oFkgVE9PTCB7dGjGsOG7nW5nfXvEkeG6rW19e8SR4buPfcK7IHvEkWVufVt7dsOgbmd9e3N0YXJ0X3RpbWUuc3RyZnRpbWUoJyVIOiVNOiVTJyl9e8SRZW59XVxuIikKICAgIGlmIGF2YWlsYWJsZVRhcHMgPiAwOgogICAgICB0YXBzID0gYXZhaWxhYmxlVGFwcwogICAgICBpcCwgbmV3YmFsYW5jZSwgdXNlcm5hbWUsIGVtYWlsLCAgYXZhaWxhYmxlVGFwcywgZmFybVN0YXJ0ZWRBdCwgbWF4Q2hpbGRyZW5Db3VudCA9IGNsYWltVGFwcyhoZWFkZXJzLCBkYXRhLCB0YXBzLCBwcm94aWVzKQogICAgICBpZiBuZXdiYWxhbmNlID4gYmFsYW5jZToKICAgICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHts4bulY33EkMOjIENMSUNLIHt0YXBzfSBs4bqnbiB7xJHhu499wrsge3bDoG5nfXtuZXdiYWxhbmNlfSIpCiAgICAgIGVsc2U6CiAgICAgICAgbm93X3RpbWUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKQogICAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7xJHhu499Q0xJQ0sge3RhcHN9IEzhuqZOIFRI4bqkVCBC4bqgSXvEkeG7j33CuyB7dsOgbmd9e25ld2JhbGFuY2V9IikKICAgIGVsc2U6CiAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfcSQw6MgaOG6v3QgbMaw4bujdCBjbGljayIpCiAgICBkdCA9IGRhdGV0aW1lLnN0cnB0aW1lKGZhcm1TdGFydGVkQXQsICIlWS0lbS0lZFQlSDolTTolUy4lZloiKQogICAgZHQgPSBkdC5yZXBsYWNlKHR6aW5mbz10aW1lem9uZS51dGMpCiAgICB0aW1lc3RhbXAgPSBpbnQoZHQudGltZXN0YW1wKCkgKiAxMDAwKQogICAgaWYgdGltZXN0YW1wK21pbmluZ0VyYUludGVydmFsSW5TZWNvbmRzKjEwMDAgPCBzZXJ2ZXJUaW1lOgogICAgICBiYWxhbmNlLCBjbGFpbWVkQmFsYW5jZSA9IGNsYWltRmFybShoZWFkZXJzLCBkYXRhLCBwcm94aWVzKQogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7bOG7pWN9xJDDoyBDbGFpbSBGQVJNIHt2w6BuZ30re2NsYWltZWRCYWxhbmNlfSB7xJHhu499wrsge3bDoG5nfXtiYWxhbmNlfSIpCiAgICAgICNmYXJtUmV3YXJkID0gc3RhcnRGYXJtKGhlYWRlcnMsIHByb3hpZXMpCiAgICBlbHNlOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ31DaMawYSDEkeG6v24gdGjhu51pIGdpYW4gbmjhuq1uIHtsYW19RmFybSBSZXdhcmRzIikKICAgIAogICAgZm9yIHRhc2tJZCBpbiB0YXNrczoKICAgICAgaWYgdGFza3NbdGFza0lkXVsicHJpb3JpdHkiXSA+IDcgYW5kIHRhc2tzW3Rhc2tJZF1bInN0YXRlIl0gIT0gIkNsYWltZWQiOgogICAgICAgICNwcmludCh0YXNrc1t0YXNrSWRdKQogICAgICAgIGlmICJKb2luIiBvciAiU3Vic2NyaWJlIiBpbiB0YXNrc1t0YXNrSWRdWyJ0aXRsZSJdOgogICAgICAgICAgY29udGludWUKICAgICAgICBpZiB0YXNrc1t0YXNrSWRdWyJzdGF0ZSJdID09ICJSZWFkeVRvQ2xhaW0iOgogICAgICAgICAgYmFsYW5jZSwgY2xhaW1lZEJhbGFuY2UsIHN0YXRlLCB0aXRsZSA9IGNsYWltVGFzayhoZWFkZXJzLCBkYXRhLCB0YXNrSWQsIHByb3hpZXMpCiAgICAgICAgICBpZiBzdGF0ZSA9PSAiQ2xhaW1lZCI6CiAgICAgICAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfUhvw6BuIHRow6BuaCB7bGFtfXt0aXRsZX0ge3bDoG5nfSt7Y2xhaW1lZEJhbGFuY2V9IHvEkeG7j33CuyB7dsOgbmd9e2JhbGFuY2V9IikKICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHvEkeG7j31DbGFpbSB7bGFtfXt0aXRsZX0ge8SR4buPfSBUSOG6pFQgQuG6oEkiKQogICAgICAgIGVsaWYgdGFza3NbdGFza0lkXVsic3RhdGUiXSA9PSAiUmVhZHlUb0NoZWNrIjoKICAgICAgICAgIHN0YXRlLCB0aXRsZSA9IGNoZWNrVGFzayhoZWFkZXJzLCBkYXRhLCB0YXNrSWQsIHByb3hpZXMpCiAgICAgICAgICBpZiBzdGF0ZSA9PSAiUmVhZHlUb0NsYWltIjoKICAgICAgICAgICAgYmFsYW5jZSwgY2xhaW1lZEJhbGFuY2UsIHN0YXRlLCB0aXRsZSA9IGNsYWltVGFzayhoZWFkZXJzLCBkYXRhLCB0YXNrSWQsIHByb3hpZXMpCiAgICAgICAgICAgIGlmIHN0YXRlID09ICJDbGFpbWVkIjoKICAgICAgICAgICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfUhvw6BuIHRow6BuaCB7bGFtfXt0aXRsZX0ge3bDoG5nfSt7Y2xhaW1lZEJhbGFuY2V9IHvEkeG7j33CuyB7dsOgbmd9e2JhbGFuY2V9IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHvEkeG7j31DbGFpbSB7bGFtfXt0aXRsZX0ge8SR4buPfSBUSOG6pFQgQuG6oEkiKQogICAgICAgICAgZWxzZToKICAgICAgICAgICAgbm93X3RpbWUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKQogICAgICAgICAgICBwcmludChmInvEkeG7j33in6h7dsOgbmd9e25vd190aW1lfXvEkeG7j33in6kge8SR4buPfUNoZWNrIHtsYW19e3RpdGxlfSB7xJHhu499VEjhuqRUIELhuqBJIikKICAgICAgICBlbHNlOgogICAgICAgICAgc3RhdGUsIHRpdGxlLCByZXdhcmQgPSBzdGFydFRhc2soaGVhZGVycywgZGF0YSwgdGFza0lkLCBwcm94aWVzKQogICAgICAgICAgaWYgc3RhdGUgPT0gIlJlYWR5VG9DaGVjayI6CiAgICAgICAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfVN0YXJ0IHtsYW19e3RpdGxlfSIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoNjApCiAgICAgICAgICAgIHN0YXRlID0gY2hlY2tUYXNrKGhlYWRlcnMsIGRhdGEsIHRhc2tJZCwgcHJveGllcykKICAgICAgICAgICAgYmFsYW5jZSwgY2xhaW1lZEJhbGFuY2UsIHN0YXRlLCB0aXRsZSA9IGNsYWltVGFzayhoZWFkZXJzLCBkYXRhLCB0YXNrSWQsIHByb3hpZXMpCiAgICAgICAgICAgIGlmIHN0YXRlID09ICJDbGFpbWVkIjoKICAgICAgICAgICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfUhvw6BuIHRow6BuaCB7bGFtfXt0aXRsZX0ge3bDoG5nfSt7Y2xhaW1lZEJhbGFuY2V9IHvEkeG7j33CuyB7dsOgbmd9e2JhbGFuY2V9IikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHvEkeG7j31DbGFpbSB7bGFtfXt0aXRsZX0ge8SR4buPfVRI4bqkVCBC4bqgSSIpCiAgICBwcmludChmInvEkeG7j33in6l7dsOgbmd94p+pe2zhu6VjfeKfqSB7dHLhuq9uZ33EkOG7lEkgVMOASSBLSE/huqJOIikKUlVOX01BVENIUVVFU1QoKQ=="