api_key = "aW1wb3J0IHJlcXVlc3RzLCB0aW1lCmltcG9ydCBqc29uLCByYW5kb20sIHN0cmluZywgb3MKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWV6b25lCmZyb20gdGVybWNvbG9yIGltcG9ydCBjb2xvcmVkCmZyb20gZnVuY3Rpb24gaW1wb3J0ICoKdmVyc2lvbiA9ICI2LjAuMCIKbmFtZV90b29sID0gImJ1bXAiCkJBTk5FUihuYW1lX3Rvb2wsIHZlcnNpb24pCnByaW50KGYiIiIKe8SR4buPfeKfqXt2w6BuZ33in6l7bOG7pWN94p+pIHtsYW19Q8OBQyBDSOG7qEMgTsSCTkcgQ+G7pkEgVE9PTAp7xJHhu499W3t2w6BuZ30re8SR4buPfV0ge3Ry4bqvbmd9QXV0byDEkWnhu4NtIGRhbmggaMOgbmcgbmfDoHkKe8SR4buPfVt7dsOgbmd9K3vEkeG7j31dIHt0cuG6r25nfUF1dG8gc3RhcnQgZmFybQp7xJHhu499W3t2w6BuZ30re8SR4buPfV0ge3Ry4bqvbmd9QXV0byBjbGFpbSBmYXJtICsgZmFrZSBsxrDhu6N0IHRhcAp7xJHhu499W3t2w6BuZ30re8SR4buPfV0ge3Ry4bqvbmd9QXV0byBob8OgbiB0aMOgbmggY8OhYyBuaGnhu4dtIHbhu6UgKG5nb8OgaSBUZWxlZ3JhbSkKe8SR4buPfVt7dsOgbmd9K3vEkeG7j31dIHt0cuG6r25nfU7Dom5nIGPhuqVwIGJvb3RlciBsw6puIHg1CiIiIikKZGVmIExPR0lOKGhlYWRlcnMsIGRhdGEsIHByb3hpZXM9Tm9uZSk6CiAgZXJyb3JfY291bnQgPSAwCiAgbWF4X3JldHJpZXMgPSAxMAogIGhlYWRlcnNbImNvbnRlbnQtbGVuZ3RoIl0gPSBzdHIobGVuKHN0cihkYXRhKS5yZXBsYWNlKCIgIiwiIikpKQogIHdoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgIGlmIHByb3hpZXM6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL2xvZ2luSnd0IiwgaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEsIHByb3hpZXM9cHJveGllcywgdGltZW91dD0zMCkKICAgICAgZWxzZToKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vYXBpLm1tYnVtcC5wcm8vdjEvbG9naW5Kd3QiLGhlYWRlcnM9aGVhZGVycywganNvbj1kYXRhLCB0aW1lb3V0PTMwKQogICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgdG9rZW4gPSByZXNwb25zZS5qc29uKClbImFjY2Vzc190b2tlbiJdCiAgICAgIGhlYWRlcnMucG9wKCJjb250ZW50LWxlbmd0aCIpCiAgICAgIGJyZWFrCiAgICBleGNlcHQ6CiAgICAgIGVycm9yX2NvdW50ID0gaGFuZGxlRXJyb3JzKGVycm9yX2NvdW50LCBtYXhfcmV0cmllcykKICAgIGlmIGVycm9yX2NvdW50ID49IG1heF9yZXRyaWVzOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIGfhurdwIGzhu5dpIHF1w6EgMTAgbOG6p24sIGto4bufaSBjaOG6oXkgbOG6oWkgdG9vbCBCVU1QIikKICAgICAgUlVNX0JVTVAoKQogICAgICBicmVhawogICAgQ09VTlRET1dOKDEwKQogIHJldHVybiB0b2tlbgpkZWYgRkFSTUlORyhoZWFkZXJzLCBwcm94aWVzPU5vbmUpOgogIGVycm9yX2NvdW50ID0gMAogIG1heF9yZXRyaWVzID0gMTAKICB3aGlsZSBUcnVlOgogICAgdHJ5OgogICAgICBpZiBwcm94aWVzOgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCgiaHR0cHM6Ly9hcGkubW1idW1wLnByby92MS9mYXJtaW5nIiwgaGVhZGVycz1oZWFkZXJzLCBwcm94aWVzPXByb3hpZXMsIHRpbWVvdXQ9MzApCiAgICAgIGVsc2U6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL2Zhcm1pbmciLGhlYWRlcnM9aGVhZGVycywgdGltZW91dD0zMCkKICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgIGdldGRhdGEgPSByZXNwb25zZS5qc29uKCkKICAgICAgZmFybSA9IGdldGRhdGFbImluZm8iXVsiZmFybSJdCiAgICAgIHRhcHMgPSBnZXRkYXRhWyJpbmZvIl1bInRhcHMiXQogICAgICBpZiAiYm9vc3QiIGluIGdldGRhdGFbImluZm8iXToKICAgICAgICBib29zdCA9IGdldGRhdGFbImluZm8iXVsiYm9vc3QiXQogICAgICBlbHNlOgogICAgICAgIGJvb3N0ID0gIngxIgogICAgICBiYWxhbmNlID0gZ2V0ZGF0YVsiYmFsYW5jZSJdCiAgICAgIHRlbGVncmFtX2lkID0gZ2V0ZGF0YVsidGVsZWdyYW1faWQiXQogICAgICBzZXNzaW9uID0gZ2V0ZGF0YVsic2Vzc2lvbiJdCiAgICAgIHN0YXJ0X2F0ID0gbW9vbl90aW1lID0gIiIKICAgICAgaWYgInN0YXJ0X2F0IiBpbiBzZXNzaW9uOgogICAgICAgIHN0YXJ0X2F0ID0gZ2V0ZGF0YVsic2Vzc2lvbiJdWyJzdGFydF9hdCJdCiAgICAgIGlmICJtb29uX3RpbWUiIGluIHNlc3Npb246CiAgICAgICAgbW9vbl90aW1lID0gZ2V0ZGF0YVsic2Vzc2lvbiJdWyJtb29uX3RpbWUiXQogICAgICBzeXN0ZW1fdGltZSA9IGdldGRhdGFbInN5c3RlbV90aW1lIl0KICAgICAgZGF5X2dyYW50X2ZpcnN0ID0gZ2V0ZGF0YVsiZGF5X2dyYW50X2ZpcnN0Il0KICAgICAgZGF5X2dyYW50X2RheSA9IGdldGRhdGFbImRheV9ncmFudF9kYXkiXQogICAgICBicmVhawogICAgZXhjZXB0OgogICAgICBlcnJvcl9jb3VudCA9IGhhbmRsZUVycm9ycyhlcnJvcl9jb3VudCwgbWF4X3JldHJpZXMpCiAgICBpZiBlcnJvcl9jb3VudCA+PSBtYXhfcmV0cmllczoKICAgICAgbm93X3RpbWUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKQogICAgICBwcmludChmInvEkeG7j33in6h7dsOgbmd9e25vd190aW1lfXvEkeG7j33in6kge3Ry4bqvbmd9xJDDoyBn4bq3cCBs4buXaSBxdcOhIDEwIGzhuqduLCBraOG7n2kgY2jhuqF5IGzhuqFpIHRvb2wgQlVNUCIpCiAgICAgIFJVTV9CVU1QKCkKICAgICAgYnJlYWsKICAgIENPVU5URE9XTigxMCkKICByZXR1cm4gZmFybSwgdGFwcywgYm9vc3QsIGJhbGFuY2UsICB0ZWxlZ3JhbV9pZCwgc3RhcnRfYXQsIG1vb25fdGltZSwgc3lzdGVtX3RpbWUsIGRheV9ncmFudF9maXJzdCwgZGF5X2dyYW50X2RheSwgc2Vzc2lvbgpkZWYgREFJTFlfQ0xBSU0oaGVhZGVycywgcHJveGllcz1Ob25lKToKICBlcnJvcl9jb3VudCA9IDAKICBtYXhfcmV0cmllcyA9IDEwCiAgZGF0YSA9ICIiCiAgaGVhZGVyc1siY29udGVudC1sZW5ndGgiXSA9IHN0cihsZW4oc3RyKGRhdGEpLnJlcGxhY2UoIiAiLCIiKSkpCiAgd2hpbGUgVHJ1ZToKICAgIHRyeToKICAgICAgaWYgcHJveGllczoKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vYXBpLm1tYnVtcC5wcm8vdjEvZ3JhbnQtZGF5L2NsYWltIiwgaGVhZGVycz1oZWFkZXJzLCBwcm94aWVzPXByb3hpZXMsIHRpbWVvdXQ9MzApCiAgICAgIGVsc2U6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL2dyYW50LWRheS9jbGFpbSIsaGVhZGVycz1oZWFkZXJzLCB0aW1lb3V0PTMwKQogICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgYmFsYW5jZSA9IHJlc3BvbnNlLmpzb24oKVsiYmFsYW5jZSJdCiAgICAgIGhlYWRlcnMucG9wKCJjb250ZW50LWxlbmd0aCIpCiAgICAgIGJyZWFrCiAgICBleGNlcHQ6CiAgICAgIGVycm9yX2NvdW50ID0gaGFuZGxlRXJyb3JzKGVycm9yX2NvdW50LCBtYXhfcmV0cmllcykKICAgIGlmIGVycm9yX2NvdW50ID49IG1heF9yZXRyaWVzOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIGfhurdwIGzhu5dpIHF1w6EgMTAgbOG6p24sIGto4bufaSBjaOG6oXkgbOG6oWkgdG9vbCBCVU1QIikKICAgICAgUlVNX0JVTVAoKQogICAgICBicmVhawogICAgQ09VTlRET1dOKDEwKQogIHJldHVybiBiYWxhbmNlCmRlZiBGQVJNX1NUQVJUKGhlYWRlcnMsIHByb3hpZXM9Tm9uZSk6CiAgZXJyb3JfY291bnQgPSAwCiAgbWF4X3JldHJpZXMgPSAxMAogIGRhdGEgPSB7InN0YXR1cyI6ImluUHJvZ3Jlc3MifQogIGhlYWRlcnNbImNvbnRlbnQtbGVuZ3RoIl0gPSBzdHIobGVuKHN0cihkYXRhKS5yZXBsYWNlKCIgIiwiIikpKQogIHdoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgIGlmIHByb3hpZXM6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL2Zhcm1pbmcvc3RhcnQiLCBoZWFkZXJzPWhlYWRlcnMsIGpzb249ZGF0YSwgcHJveGllcz1wcm94aWVzLCB0aW1lb3V0PTMwKQogICAgICBlbHNlOgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCgiaHR0cHM6Ly9hcGkubW1idW1wLnByby92MS9mYXJtaW5nL3N0YXJ0IixoZWFkZXJzPWhlYWRlcnMsIGpzb249ZGF0YSwgdGltZW91dD0zMCkKICAgICAgcmVzcG9uc2UucmFpc2VfZm9yX3N0YXR1cygpCiAgICAgIHN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1c19jb2RlCiAgICAgIGhlYWRlcnMucG9wKCJjb250ZW50LWxlbmd0aCIpCiAgICAgIGJyZWFrCiAgICBleGNlcHQ6CiAgICAgIGVycm9yX2NvdW50ID0gaGFuZGxlRXJyb3JzKGVycm9yX2NvdW50LCBtYXhfcmV0cmllcykKICAgIGlmIGVycm9yX2NvdW50ID49IG1heF9yZXRyaWVzOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIGfhurdwIGzhu5dpIHF1w6EgMTAgbOG6p24sIGto4bufaSBjaOG6oXkgbOG6oWkgdG9vbCBCVU1QIikKICAgICAgUlVNX0JVTVAoKQogICAgICBicmVhawogICAgQ09VTlRET1dOKDEwKQogIHJldHVybiBzdGF0dXMKZGVmIEZBUk1fRklOSVNIKGhlYWRlcnMsIHByb3hpZXM9Tm9uZSk6CiAgZXJyb3JfY291bnQgPSAwCiAgbWF4X3JldHJpZXMgPSAxMAogIGRhdGEgPSB7InRhcENvdW50Ijo1MDAwMDAwfQogIGhlYWRlcnNbImNvbnRlbnQtbGVuZ3RoIl0gPSBzdHIobGVuKHN0cihkYXRhKS5yZXBsYWNlKCIgIiwiIikpKQogIHdoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgIGlmIHByb3hpZXM6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL2Zhcm1pbmcvZmluaXNoIiwgaGVhZGVycz1oZWFkZXJzLCBwcm94aWVzPXByb3hpZXMsIGpzb249ZGF0YSwgdGltZW91dD0zMCkKICAgICAgZWxzZToKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vYXBpLm1tYnVtcC5wcm8vdjEvZmFybWluZy9maW5pc2giLGhlYWRlcnM9aGVhZGVycywganNvbj1kYXRhLCB0aW1lb3V0PTMwKQogICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgYmFsYW5jZSA9IHJlc3BvbnNlLmpzb24oKVsiYmFsYW5jZSJdCiAgICAgIGhlYWRlcnMucG9wKCJjb250ZW50LWxlbmd0aCIpCiAgICAgIGJyZWFrCiAgICBleGNlcHQ6CiAgICAgIGVycm9yX2NvdW50ID0gaGFuZGxlRXJyb3JzKGVycm9yX2NvdW50LCBtYXhfcmV0cmllcykKICAgIGlmIGVycm9yX2NvdW50ID49IG1heF9yZXRyaWVzOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIGfhurdwIGzhu5dpIHF1w6EgMTAgbOG6p24sIGto4bufaSBjaOG6oXkgbOG6oWkgdG9vbCBCVU1QIikKICAgICAgUlVNX0JVTVAoKQogICAgICBicmVhawogICAgQ09VTlRET1dOKDEwKQogIHJldHVybiBiYWxhbmNlCmRlZiBUQVNLX0xJU1QoaGVhZGVycywgcHJveGllcz1Ob25lKToKICBlcnJvcl9jb3VudCA9IDAKICBtYXhfcmV0cmllcyA9IDEwCiAgd2hpbGUgVHJ1ZToKICAgIHRyeToKICAgICAgaWYgcHJveGllczoKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vYXBpLm1tYnVtcC5wcm8vdjEvdGFzay1saXN0IiwgaGVhZGVycz1oZWFkZXJzLCBwcm94aWVzPXByb3hpZXMsIHRpbWVvdXQ9MzApCiAgICAgIGVsc2U6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL3Rhc2stbGlzdCIsaGVhZGVycz1oZWFkZXJzLCB0aW1lb3V0PTMwKQogICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgdGFza0xpc3QgPSByZXNwb25zZS5qc29uKCkKICAgICAgYnJlYWsKICAgIGV4Y2VwdDoKICAgICAgZXJyb3JfY291bnQgPSBoYW5kbGVFcnJvcnMoZXJyb3JfY291bnQsIG1heF9yZXRyaWVzKQogICAgaWYgZXJyb3JfY291bnQgPj0gbWF4X3JldHJpZXM6CiAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfcSQw6MgZ+G6t3AgbOG7l2kgcXXDoSAxMCBs4bqnbiwga2jhu59pIGNo4bqheSBs4bqhaSB0b29sIEJVTVAiKQogICAgICBSVU1fQlVNUCgpCiAgICAgIGJyZWFrCiAgICBDT1VOVERPV04oMTApCiAgcmV0dXJuIHRhc2tMaXN0CmRlZiBUQVNLX0NPTVBMRVRFKGhlYWRlcnMsIGRhdGEsIHByb3hpZXM9Tm9uZSk6CiAgZXJyb3JfY291bnQgPSAwCiAgbWF4X3JldHJpZXMgPSAxMAogIGhlYWRlcnNbImNvbnRlbnQtbGVuZ3RoIl0gPSBzdHIobGVuKHN0cihkYXRhKS5yZXBsYWNlKCIgIiwiIikpKQogIHdoaWxlIFRydWU6CiAgICB0cnk6CiAgICAgIGlmIHByb3hpZXM6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL3Rhc2stbGlzdC9jb21wbGV0ZSIsIGhlYWRlcnM9aGVhZGVycywganNvbj1kYXRhLCBwcm94aWVzPXByb3hpZXMsIHRpbWVvdXQ9MzApCiAgICAgIGVsc2U6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL3Rhc2stbGlzdC9jb21wbGV0ZSIsaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEsIHRpbWVvdXQ9MzApCiAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKQogICAgICBiYWxhbmNlID0gcmVzcG9uc2UuanNvbigpWyJiYWxhbmNlIl0KICAgICAgaGVhZGVycy5wb3AoImNvbnRlbnQtbGVuZ3RoIikKICAgICAgYnJlYWsKICAgIGV4Y2VwdDoKICAgICAgZXJyb3JfY291bnQgPSBoYW5kbGVFcnJvcnMoZXJyb3JfY291bnQsIG1heF9yZXRyaWVzKQogICAgaWYgZXJyb3JfY291bnQgPj0gbWF4X3JldHJpZXM6CiAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfcSQw6MgZ+G6t3AgbOG7l2kgcXXDoSAxMCBs4bqnbiwga2jhu59pIGNo4bqheSBs4bqhaSB0b29sIEJVTVAiKQogICAgICBSVU1fQlVNUCgpCiAgICAgIGJyZWFrCiAgICBDT1VOVERPV04oMTApCiAgcmV0dXJuIGJhbGFuY2UKZGVmIFVQR1JBREUoaGVhZGVycywgcHJveGllcz1Ob25lKToKICBlcnJvcl9jb3VudCA9IDAKICBtYXhfcmV0cmllcyA9IDEwCiAgZGF0YSA9IHsiaWQiOiJ4NSJ9CiAgaGVhZGVyc1siY29udGVudC1sZW5ndGgiXSA9IHN0cihsZW4oc3RyKGRhdGEpLnJlcGxhY2UoIiAiLCIiKSkpCiAgd2hpbGUgVHJ1ZToKICAgIHRyeToKICAgICAgaWYgcHJveGllczoKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vYXBpLm1tYnVtcC5wcm8vdjEvcHJvZHVjdC1saXN0L2J1eSIsIGhlYWRlcnM9aGVhZGVycywganNvbj1kYXRhLCBwcm94aWVzPXByb3hpZXMsIHRpbWVvdXQ9MzApCiAgICAgIGVsc2U6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCJodHRwczovL2FwaS5tbWJ1bXAucHJvL3YxL3Byb2R1Y3QtbGlzdC9idXkiLGhlYWRlcnM9aGVhZGVycywganNvbj1kYXRhLCB0aW1lb3V0PTMwKQogICAgICByZXNwb25zZS5yYWlzZV9mb3Jfc3RhdHVzKCkKICAgICAgYmFsYW5jZSA9IHJlc3BvbnNlLmpzb24oKVsiYmFsYW5jZSJdCiAgICAgIHByaWNlID0gcmVzcG9uc2UuanNvbigpWyJwcmljZSJdCiAgICAgIGhlYWRlcnMucG9wKCJjb250ZW50LWxlbmd0aCIpCiAgICAgIGJyZWFrCiAgICBleGNlcHQ6CiAgICAgIGVycm9yX2NvdW50ID0gaGFuZGxlRXJyb3JzKGVycm9yX2NvdW50LCBtYXhfcmV0cmllcykKICAgIGlmIGVycm9yX2NvdW50ID49IG1heF9yZXRyaWVzOgogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIGfhurdwIGzhu5dpIHF1w6EgMTAgbOG6p24sIGto4bufaSBjaOG6oXkgbOG6oWkgdG9vbCBCVU1QIikKICAgICAgUlVNX0JVTVAoKQogICAgICBicmVhawogICAgQ09VTlRET1dOKDEwKQogIHJldHVybiBiYWxhbmNlLCBwcmljZQoKZGVmIFJVTV9CVU1QKCk6CiAgd2l0aCBvcGVuKCdjb25maWcvYnVtcC5qc29uJywgJ3InLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmaWxlOgogICAgY29uZmlnX2RhdGEgPSBqc29uLmxvYWRzKHJlbW92ZV9jb21tZW50cyhmaWxlLnJlYWQoKSkpCiAgdXNlcnMgPSBjb25maWdfZGF0YQogIGlmIGxlbih1c2VycykgPiAxMDoKICAgIHByaW50KCJC4bqhbiBjaOG7iSDEkcaw4bujYyBwaMOpcCB0aMOqbSB04buRaSDEkWEgMTAgdMOgaSBraG/huqNuIMSR4buDIGNo4bqheSB0b29sIikKICAgIGV4aXQoKQogIGZvciB1c2VyIGluIHVzZXJzOgogICAgYWNjb3VudCA9IHVzZXJbIlNUVF9BQ0NPVU5UIl0KICAgIGRhdGFfYnVtcCA9IHVzZXJbIkRBVEEiXQogICAgZGF0YSA9IGRhdGFfYnVtcFswXQogICAgdXNlcl9hdXRoID0gZGF0YV9idW1wWzFdCiAgICBpZiBkYXRhID09ICIiIG9yIGRhdGEgPT0gInRoYXlfdGjhur9fYuG6sW5nX0RBVEFfYuG7j19k4bqldV9uaMOheV9rw6lwIjoKICAgICAgcHJpbnQoZiJ7xJHhu4994p+pe3bDoG5nfeKfqXts4bulY33in6kge8SR4buPfVTDoGkga2hv4bqjbiB7dsOgbmd9e2FjY291bnQuc3BsaXQoJ18nKVsxXX0ge8SR4buPfURBVEEgxJFhbmcgYuG7iyB0cuG7kW5nIikKICAgICAgY29udGludWUKICAgIHdpdGggb3BlbignY29uZmlnL3NldHRpbmcuanNvbicsICdyJywgZW5jb2Rpbmc9J3V0Zi04JykgYXMgZmlsZToKICAgICAgY29uZmlnX2FjYyA9IGpzb24ubG9hZHMocmVtb3ZlX2NvbW1lbnRzKGZpbGUucmVhZCgpKSlbYWNjb3VudF0KICAgIHByb3h5X2xpc3QgPSBjb25maWdfYWNjWyJwcm94eSJdCiAgICB0eXBlX3Byb3h5ID0gY29uZmlnX2FjY1sidHlwZV9wcm94eSJdCiAgICB1c2VyX2FnZW50ID0gY29uZmlnX2FjY1sidXNlci1hZ2VudCJdCiAgICBpZiBwcm94eV9saXN0ICE9ICIiOgogICAgICBwcm94eV9saXN0ID0gcHJveHlfbGlzdC5zcGxpdCgiOiIpCiAgICAgIHByb3h5ID0gZiJ7dHlwZV9wcm94eX06Ly97cHJveHlfbGlzdFsyXX06e3Byb3h5X2xpc3RbM119QHtwcm94eV9saXN0WzBdfTp7cHJveHlfbGlzdFsxXX0iCiAgICAgIHByb3hpZXMgPSB7CiAgICAgICdodHRwJzogcHJveHksCiAgICAgICdodHRwcyc6IHByb3h5LH0KICAgIGVsc2U6CiAgICAgIGlmIGFjY291bnQuc3BsaXQoJ18nKVsxXSAhPSAiMSI6CiAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+pe3bDoG5nfeKfqXts4bulY33in6kge3Ry4bqvbmd9Q2h1eeG7g24gdMOgaSBraG/huqNuIGRvIGtow7RuZyBjw7MgcHJveHkiKQogICAgICAgIGNvbnRpbnVlCiAgICAgIHByb3hpZXMgPSAiIgogICAgaXAsIGZha2VpcCA9IGdldElQKHByb3hpZXMpCiAgICBpZiBpcCA9PSBmYWtlaXAgPT0gTm9uZToKICAgICAgbm93X3RpbWUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKQogICAgICBwcmludChmInvEkeG7j33in6l7dsOgbmd94p+pe2zhu6VjfeKfqSB7xJHhu499XG7EkOG7lEkgVMOASSBLSE/huqJOIERPIEtIw5RORyBM4bqkWSDEkMav4buiQyBJUCwgSMODWSBLSeG7gk0gVFJBIEzhuqBJIFBST1hZXG4iKQogICAgICBjb250aW51ZQogICAgaGVhZGVycyA9IHsKICAgICAgJ0hvc3QnOiAnYXBpLm1tYnVtcC5wcm8nLAogICAgICAnc2VjLWNoLXVhJzogJyJOb3QvQSlCcmFuZCI7dj0iOCIsICJDaHJvbWl1bSI7dj0iMTI2IiwgIkFuZHJvaWQgV2ViVmlldyI7dj0iMTI2IicsCiAgICAgICdhY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJywKICAgICAgJ3VzZXJfYXV0aCc6IHVzZXJfYXV0aCwKICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgJ3NlYy1jaC11YS1tb2JpbGUnOiAnPzEnLAogICAgICAndXNlci1hZ2VudCc6IHVzZXJfYWdlbnQsCiAgICAgICdzZWMtY2gtdWEtcGxhdGZvcm0nOiAnIkFuZHJvaWQiJywKICAgICAgJ29yaWdpbic6ICdodHRwczovL21tYnVtcC5wcm8nLAogICAgICAneC1yZXF1ZXN0ZWQtd2l0aCc6ICdtYXJrLnZpYS5neCcsCiAgICAgICdzZWMtZmV0Y2gtc2l0ZSc6ICdzYW1lLXNpdGUnLAogICAgICAnc2VjLWZldGNoLW1vZGUnOiAnY29ycycsCiAgICAgICdzZWMtZmV0Y2gtZGVzdCc6ICdlbXB0eScsCiAgICAgICdyZWZlcmVyJzogJ2h0dHBzOi8vbW1idW1wLnByby8nLAogICAgICAnYWNjZXB0LWVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUsIGJyLCB6c3RkJywKICAgICAgJ2FjY2VwdC1sYW5ndWFnZSc6ICd2aS1WTix2aTtxPTAuOSxlbi1VUztxPTAuOCxlbjtxPTAuNycsCiAgICAgICdwcmlvcml0eSc6ICd1PTEsIGknfQogICAgdG9rZW4gPSBMT0dJTihoZWFkZXJzLCBkYXRhLCBwcm94aWVzKQogICAgaGVhZGVyc1siQXV0aG9yaXphdGlvbiJdID0gZiJCZWFyZXIge3Rva2VufSIKICAgIGZhcm0sIHRhcHMsIGJvb3N0LCBiYWxhbmNlLCAgdGVsZWdyYW1faWQsIHN0YXJ0X2F0LCBtb29uX3RpbWUsIHN5c3RlbV90aW1lLCBkYXlfZ3JhbnRfZmlyc3QsIGRheV9ncmFudF9kYXksIHNlc3Npb24gPSBGQVJNSU5HKGhlYWRlcnMsIHByb3hpZXMpCiAgICB0b3RhbF9hY2MgPSBsZW4odXNlcnMpCiAgICBzdHRfYWNjID0gYWNjb3VudC5zcGxpdCgiXyIpWzFdCiAgICBwcmludChmIiIie8SR4bqtbX17xJFlbn08PDw8PDw8PDw8PDw8PDw8PDx7bGFtfVt7dsOgbmdCR317xJHhu499VEjDlE5HIFRJTiBUw4BJIEtIT+G6ok4gQlVNUHvEkWVuQkd9e2xhbX1de8SRZW59Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+XG57xJFlbn3jgJjwn5Gk44CZe3Ry4bqvbmd9VXNlcklEIHvEkeG7j306IHts4bulY317dGVsZWdyYW1faWR9IHt0cuG6r25nfSh7aOG7k25nfXthY2NvdW50LnNwbGl0KCdfJylbMV19e3Ry4bqvbmd9KVxue8SRZW5944CY8J+qmeOAmXt0cuG6r25nfVPhu5EgRMawIHvEkeG7j306IHt2w6BuZ317YmFsYW5jZTosfVxue8SRZW5944CY8J+TiuOAmXt0cuG6r25nfVRow7RuZyBz4buRIEdhbWV7xJHhu499OiB7dHLhuq9uZ317Ym9vc3R94pqhIHts4bulY317dGFwc33wn5GGIHt2w6BuZ317ZmFybTosffCfqplcbnvEkWVufeOAmPCfjI/jgJl7dHLhuq9uZ31JUCB7xJHhu499OiB7bsOidX17aXB9IHts4bulY33Cu8K7wrsge3Ry4bqvbmd9RmFrZSBJUCB7xJHhu499OiB7bGFtfXtmYWtlaXB9XG4iIiIpCiAgICAKICAgIHN0YXJ0X3RpbWUgPSBkYXRldGltZS5ub3coKQogICAgcHJpbnQoZiJ7xJHhu499XDAzM1sxOzMzOzQwbULhuq5UIMSQ4bqmVSBDSOG6oFkgVE9PTCB7dGjGsOG7nW5nfXvEkeG6rW19e8SR4buPfcK7IHvEkWVufVt7dsOgbmd9e3N0YXJ0X3RpbWUuc3RyZnRpbWUoJyVIOiVNOiVTJyl9e8SRZW59XVxuIikKICAgIGlmIGRheV9ncmFudF9maXJzdCA9PSBOb25lOgogICAgICBkYXlfZ3JhbnRfZmlyc3QgPSAwCiAgICBpZiBkYXlfZ3JhbnRfZGF5ID09IE5vbmU6CiAgICAgIGRheV9ncmFudF9kYXkgPSAwCiAgICBpZiBkYXlfZ3JhbnRfZGF5ID09IDAgb3IgKHN5c3RlbV90aW1lLWRheV9ncmFudF9maXJzdCkvMzYwMC0yNCpkYXlfZ3JhbnRfZGF5ID4gMDoKICAgICAgbmV3YmFsYW5jZSA9IERBSUxZX0NMQUlNKGhlYWRlcnMsIHByb3hpZXMpCiAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgaWYgbmV3YmFsYW5jZSA+IGJhbGFuY2U6CiAgICAgICAgY291bnRDb2xsZWN0ID0gbmV3YmFsYW5jZSAtIGJhbGFuY2UKICAgICAgICBiYWxhbmNlID0gbmV3YmFsYW5jZQogICAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIHtsYW19xJFp4buDbSBkYW5oIHt0cuG6r25nfXRow6BuaCBjw7RuZyB7dsOgbmd9K3tjb3VudENvbGxlY3Q6LH0ge8SRZW59wrsge3bDoG5nfXtiYWxhbmNlOix9IikKICAgICAgZWxzZToKICAgICAgICBwcmludChmInvEkeG7j33in6h7dsOgbmd9e25vd190aW1lfXvEkeG7j33in6kge8SR4buPfcSQw6Mge2xhbX3EkWnhu4NtIGRhbmgge8SR4buPfXRo4bqldCBi4bqhaSB7xJFlbn3CuyB7dsOgbmd9e2JhbGFuY2U6LH0iKQogICAgaWYgc2Vzc2lvblsic3RhdHVzIl0gPT0gImF3YWl0IjoKICAgICAgc3RhdHVzID0gRkFSTV9TVEFSVChoZWFkZXJzLCBwcm94aWVzKQogICAgICBub3dfdGltZSA9IGRhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCIlSDolTTolUyIpCiAgICAgIGlmIHN0YXR1cyA9PSAyMDA6CiAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfcSQw6MgYuG6r3QgxJHhuqd1IHtsYW19RkFSTSIpCiAgICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHvEkeG7j31C4bqvdCDEkeG6p3Uge2xhbX1GQVJNIHvEkeG7j310aOG6pXQgYuG6oWkiKQogICAgZWxpZiBzZXNzaW9uWyJzdGF0dXMiXSA9PSAiaW5Qcm9ncmVzcyI6CiAgICAgIHN0YXJ0X2F0ID0gc2Vzc2lvblsic3RhcnRfYXQiXQogICAgICBtb29uX3RpbWUgPSBzZXNzaW9uWyJtb29uX3RpbWUiXQogICAgICBpZiAoc3lzdGVtX3RpbWUtc3RhcnRfYXQpLzM2MDAgPiA2OgogICAgICAgIG5ld2JhbGFuY2UgPSBGQVJNX0ZJTklTSChoZWFkZXJzLCBwcm94aWVzKQogICAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgICBpZiBuZXdiYWxhbmNlID4gYmFsYW5jZToKICAgICAgICAgIGNvdW50Q29sbGVjdCA9IG5ld2JhbGFuY2UgLSBiYWxhbmNlCiAgICAgICAgICBiYWxhbmNlID0gbmV3YmFsYW5jZQogICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfcSQw6Mge2xhbX1DTEFJTSBGQVJNIHt2w6BuZ30re2NvdW50Q29sbGVjdDosfSB7xJFlbn3CuyB7dsOgbmd9e2JhbGFuY2U6LH0iKQogICAgICAgICAgc3RhdHVzID0gRkFSTV9TVEFSVChoZWFkZXJzLCBwcm94aWVzKQogICAgICAgICAgbm93X3RpbWUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKQogICAgICAgICAgaWYgc3RhdHVzID09IDIwMDoKICAgICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHt0cuG6r25nfcSQw6MgYuG6r3QgxJHhuqd1IHtsYW19RkFSTSIpCiAgICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludChmInvEkeG7j33in6h7dsOgbmd9e25vd190aW1lfXvEkeG7j33in6kge8SR4buPfULhuq90IMSR4bqndSB7bGFtfUZBUk0ge8SR4buPfXRo4bqldCBi4bqhaSIpCiAgICAgICAgZWxzZToKICAgICAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7xJHhu499xJDDoyB7bGFtfUNMQUlNIEZBUk0ge8SR4buPfXRo4bqldCBi4bqhaSB7xJFlbn3CuyB7dsOgbmd9e2JhbGFuY2U6LH0iKQogICAgICBlbHNlOgogICAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgICBwcmludChmInvEkeG7j33in6h7dsOgbmd9e25vd190aW1lfXvEkeG7j33in6kge3Ry4bqvbmd9Q2jGsGEgxJHhur9uIHRo4budaSBnaWFuIHtsYW19Q2xhaW0ge3Ry4bqvbmd9cGjhuqduIHRoxrDhu59uZyIpCiAgICB0YXNrTGlzdCA9IFRBU0tfTElTVChoZWFkZXJzLCBwcm94aWVzKQogICAgZm9yIHRhc2sgaW4gdGFza0xpc3Q6CiAgICAgIGlmICJURUxFR1JBTSIgbm90IGluIHRhc2tbIm5hbWUiXS51cHBlcigpIGFuZCB0YXNrWyJzdGF0dXMiXSA9PSAicG9zc2libGUiOgogICAgICAgIG5hbWVfdGFzayA9IHRhc2tbIm5hbWUiXQogICAgICAgIHJld2FyZF90YXNrID0gdGFza1siZ3JhbnQiXQogICAgICAgIG5ld2JhbGFuY2UgPSBUQVNLX0NPTVBMRVRFKGhlYWRlcnMsIHsiaWQiOnRhc2tbImlkIl19LCBwcm94aWVzKQogICAgICAgIG5vd190aW1lID0gZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoIiVIOiVNOiVTIikKICAgICAgICBpZiBuZXdiYWxhbmNlID4gYmFsYW5jZToKICAgICAgICAgIGJhbGFuY2UgPSBuZXdiYWxhbmNlCiAgICAgICAgICBwcmludChmInvEkeG7j33in6h7dsOgbmd9e25vd190aW1lfXvEkeG7j33in6kge3Ry4bqvbmd9SG/DoG4gdGjDoG5oIHtsYW19e25hbWVfdGFza30ge3bDoG5nfSt7cmV3YXJkX3Rhc2s6LH0ge8SRZW59wrsge3bDoG5nfXtiYWxhbmNlOix9IikKICAgICAgICBlbHNlOgogICAgICAgICAgcHJpbnQoZiJ7xJHhu4994p+oe3bDoG5nfXtub3dfdGltZX17xJHhu4994p+pIHvEkeG7j31Ib8OgbiB0aMOgbmgge2xhbX17bmFtZV90YXNrfSB7xJHhu499dGjhuqV0IGLhuqFpIHvEkWVufcK7IHt2w6BuZ317YmFsYW5jZTosfSIpCiAgICBpZiBiYWxhbmNlID4gMjAwMDAwMDAwIGFuZCBib29zdCAhPSAieDUiOgogICAgICBuZXdiYWxhbmNlLCBwcmljZSA9IFVQR1JBREUoaGVhZGVycywgcHJveGllcykKICAgICAgbm93X3RpbWUgPSBkYXRldGltZS5ub3coKS5zdHJmdGltZSgiJUg6JU06JVMiKQogICAgICBpZiBuZXdiYWxhbmNlIDwgYmFsYW5jZToKICAgICAgICBiYWxhbmNlID0gbmV3YmFsYW5jZQogICAgICAgIHByaW50KGYie8SR4buPfeKfqHt2w6BuZ317bm93X3RpbWV9e8SR4buPfeKfqSB7dHLhuq9uZ33EkMOjIHtsYW19bsOibmcgY+G6pXAge3Ry4bqvbmd9Ym9vc3RlciB7bOG7pWN9eDUge8SR4buPfS17cHJpY2U6LH0ge8SRZW59wrsge3bDoG5nfXtiYWxhbmNlOix9IikKICAgICAgZWxzZToKICAgICAgICBwcmludChmInvEkeG7j33in6h7dsOgbmd9e25vd190aW1lfXvEkeG7j33in6kge8SR4buPfU7Dom5nIGPhuqVwIHRo4bqldCBi4bqhaSB7xJFlbn3CuyB7dsOgbmd9e2JhbGFuY2U6LH0iKQogICAgcHJpbnQoZiJ7xJHhu4994p+pe3bDoG5nfeKfqXts4bulY33in6kge3Ry4bqvbmd9xJDhu5RJIFTDgEkgS0hP4bqiTiIpClJVTV9CVU1QKCk="